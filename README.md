# Fibonacci API

フィボナッチ数列の第n項を返すREST APIです。

## 1. 概要
指定された整数 `n` に対して、フィボナッチ数列の第n項を算出して返却します。
高負荷対策としてメモ化（Lru Cache）を実装し、巨大な計算に対してはタイムアウト処理を設けています。

## 2. 構成
- `main.py`: FastAPIを用いたAPIサーバー。バリデーション、計算ロジック、タイムアウト制御を実装。
- `test_main.py`: `pytest` を用いたユニットテスト。正常系、異常系、およびメモ化によるパフォーマンス改善を検証。
- `requirements.txt`: 動作に必要な依存ライブラリ一覧。

## 3. こだわったポイント
- **保守運用性の考慮**: 計算ロジックとバリデーションを分離し、将来的な拡張（他の計算機能の追加など）を容易にしました。
- **パフォーマンス最適化**: `@lru_cache` を使用。一度計算した結果はメモリ上に保持し、2回目以降のリクエストは計算をスキップして即レスポンスを返します。
- **エラーハンドリング**: 不正な入力（負の数、小数、文字列、巨大すぎる数値）に対して適切なHTTP 400エラーを返却します。
- **タイムアウトの実装**: `asyncio.wait_for` を用い、1分を超える計算には 504 Gateway Timeout を返してサーバーリソースを保護します。

## 4. エンドポイント
- `GET /fib?n={value}`
  - 成功時: `{"status": 200, "result": <value>}`
  - 失敗時: `{"status": 400, "message": <error_detail>}`
